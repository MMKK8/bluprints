blueprint:
  name: "IKEA SOMRIG (ZHA) - 6 Acciones Personalizadas"
  description: "Control total para el mando IKEA SOMRIG (E2201) usando ZHA. Permite configurar pulsación simple, doble y larga para ambos botones."
  domain: automation
  input:
    somrig_device:
      name: Mando SOMRIG
      description: Selecciona el dispositivo IKEA SOMRIG.
      selector:
        device:
          filter:
            - integration: zha
              model: "IKEA of Sweden SOMRIG shortcut button"
    # Botón Superior (Puntos)
    dot_single:
      name: "Botón Superior: Pulsación Simple"
      default: []
      selector:
        action: {}
    dot_double:
      name: "Botón Superior: Pulsación Doble"
      default: []
      selector:
        action: {}
    dot_hold:
      name: "Botón Superior: Pulsación Larga"
      default: []
      selector:
        action: {}
    # Botón Inferior (Vacío)
    blank_single:
      name: "Botón Inferior: Pulsación Simple"
      default: []
      selector:
        action: {}
    blank_double:
      name: "Botón Inferior: Pulsación Doble"
      default: []
      selector:
        action: {}
    blank_hold:
      name: "Botón Inferior: Pulsación Larga"
      default: []
      selector:
        action: {}

mode: restart
max_exceeded: silent

trigger:
  # Botón Superior (Dot)
  - platform: device
    domain: zha
    device_id: !input somrig_device
    type: remote_button_short_press
    subtype: turn_on
    id: dot_single
  - platform: device
    domain: zha
    device_id: !input somrig_device
    type: remote_button_double_press
    subtype: turn_on
    id: dot_double
  - platform: device
    domain: zha
    device_id: !input somrig_device
    type: remote_button_long_press
    subtype: turn_on
    id: dot_hold

  # Botón Inferior (Blank)
  - platform: device
    domain: zha
    device_id: !input somrig_device
    type: remote_button_short_press
    subtype: turn_off
    id: blank_single
  - platform: device
    domain: zha
    device_id: !input somrig_device
    type: remote_button_double_press
    subtype: turn_off
    id: blank_double
  - platform: device
    domain: zha
    device_id: !input somrig_device
    type: remote_button_long_press
    subtype: turn_off
    id: blank_hold

action:
  - choose:
      - conditions:
          - condition: trigger
            id: dot_single
        sequence: !input dot_single
      - conditions:
          - condition: trigger
            id: dot_double
        sequence: !input dot_double
      - conditions:
          - condition: trigger
            id: dot_hold
        sequence: !input dot_hold
      - conditions:
          - condition: trigger
            id: blank_single
        sequence: !input blank_single
      - conditions:
          - condition: trigger
            id: blank_double
        sequence: !input blank_double
      - conditions:
          - condition: trigger
            id: blank_hold
        sequence: !input blank_hold
